"use strict";const arrayUnidades=["Instituto de Física (IF)","Instituto de Geociências (Igeo)","Instituto de Matemática (IM)","Instituto de Química (IQ)","Observatório do Valongo (OV)","Instituto Tércio Pacitti de Aplicações e Pesquisas Computacionais (NCE)","Decania do CCMN"];var eventosDOM=e=>{var t="";e=e.sort((e,t)=>variaveisGlobais.ordenar(e,t,"inversa","data"));for(let o=0;o<e.length;o++){let l,r;l="gerente"===e[o].emissor?"gerente":"solicitante",r=`<p class=mensagem-texto><strong>${e[o].texto}</strong></p>`,t+=`\n      <div class="evento-ds mensagem-${l}">\n        <span class='mensagem-hora'>${e[o].emissor?e[o].emissor.split(" ")[0]:"usuario"} escreveu, em ${moment(e[o].data).format("DD MMM YYYY [, às] HH:mm[h]")}</span> \n        ${r}\n      </div>\n    `}return t};const getFormElements=(e,t,o)=>{const l={};let r=e?e.target.elements:o;for(let e=0;e<r.length;e++)r[e].name&&("string"===t?l[r[e].name]?Array.isArray(l[r[e].name])?l[r[e].name]=[...l[r[e].name],r[e].value]:l[r[e].name]=[l[r[e].name],r[e].value]:l[r[e].name]=r[e].value:"array"===t&&"_csrf"!==r[e].name&&(l[r[e].name]?l[r[e].name].push(r[e].value):l[r[e].name]=[r[e].value]));return l},checkEmptyInputs=(e,t,o=0,l="html")=>{let r=!1,n=e=>{let t=!0,o=document.querySelectorAll(`input[name='${e}']`);for(let e=0;e<o.length;e++)if(o[e].checked){t=!1;break}return t},a=e=>{const t=e.parentElement.getBoundingClientRect().top,l=e.parentElement.getBoundingClientRect().left;document.getElementById("aviso-campo-invalido").style=`position: fixed; top: ${t+o}px; left: ${l}px`,e.focus(),variaveisGlobais.controlarVisibilidade("exibir","#aviso-campo-invalido"),setTimeout((function(){variaveisGlobais.controlarVisibilidade("ocultar","#aviso-campo-invalido")}),2500)};for(let o=0;o<e.length;o++){if("radio"===e[o].type&&(r=n(e[o].name))){variaveisGlobais.scrollTo(e[o].parentElement,-120,()=>a(e[o]),l);break}if((""===e[o].value||"checkbox"===e[o].type&&!e[o].checked)&&"checkbox"!==e[o].type&&!r){let n="file"===e[o].type?e[o].parentElement:e[o];variaveisGlobais.scrollTo(n,t,()=>a(e[o]),l),r=!0;break}}return r},operacaoDB=e=>{variaveisGlobais.exibirMensagem(`<h3>${e||"Comunicando com o banco de dados"}</h3><img src="/img/loading.svg">`,null,"Aguarde...")},getSelectedOption=(e,t)=>{for(let o=0;o<e.length;o++)if(e[o].value===t){e[o].selected=!0;break}};let textoCamelCase=e=>{e.trim();let t=e.split(" ")[0].toLowerCase();for(let o=1;o<e.split(" ").length;o++)t+=e.split(" ")[o].slice(0,1).toUpperCase()+e.split(" ")[o].slice(1,e.split(" ")[o].length).toLowerCase();return t.normalize("NFD").replace(/[^a-zA-Z0-9]/g,"")},removeDiacritics=e=>{return e.trim(),e.normalize("NFD").replace(/[^a-zA-Z0-9 ]/g,"")};const arrToObj=(e,t)=>{const o={};return e.forEach(e=>{if(t.includes(".")){const l=t.split(".");return o[e[l[0]][l[1]]]=e}return o[e[t]]=e}),o},swapClass=(e,t,o)=>{const l="string"==typeof e?document.querySelector(e):e,r=l.classList.contains(t)?"remove":"add",n="remove"===r?"add":"remove";l.classList[r](t),l.classList[n](o)},inserirInput=({nomeInput:e,classes:t,campoDinamico:o,container:l,listeners:r=[],callbackPreDelete:n,autoCompleteHandler:a})=>{const s=document.querySelectorAll(`.${e}`)[0],i=s?+s.dataset.idnum+1:0,c=`\n  <div class="${t} ${e} box-cinza no-height hidden opacidade-zero" id="${e}-${i}" data-idnum="${i}" >\n    <i class="fa fa-times-circle" id='delete-${e}-${i}' data-id='${e}-${i}' title='excluir item'></i>\n    ${o(i)}       \n  </div>`;document.querySelector(l).insertAdjacentHTML("afterbegin",c);const u=document.getElementById(`${e}-${i}`);document.getElementById(`delete-${e}-${i}`).addEventListener("click",t=>{n&&n(t),variaveisGlobais.controlarVisibilidade("ocultar",`#${t.target.dataset.id}`);const o=document.getElementById(`${e}-${i}`);o.classList.add("no-height"),setTimeout(()=>{1===o.parentElement.children.length&&(o.parentElement.parentElement.scrollTop=0,o.parentElement.parentElement.classList.add("vazio"))},100),setTimeout(()=>{document.getElementById(`${t.target.dataset.id}`).outerHTML=""},500)}),variaveisGlobais.controlarVisibilidade("exibir",`#${e}-${i}`),setTimeout(()=>{document.getElementById(`${e}-${i}`).classList.remove("no-height")},50);for(let e=0;e<r.length;e++)u.querySelector(r[e].elemento).addEventListener(r[e].evento,t=>r[e].funcao(t,i));a&&a(i)},loadScript=(e,t)=>{var o=document.createElement("script");o.onload=e=>{t&&t(e)},o.type="text/javascript",o.src=e,document.getElementsByTagName("head")[0].appendChild(o)},loadStyles=e=>{var t=document.createElement("link");t.rel="stylesheet",t.href=e,document.getElementsByTagName("head")[0].appendChild(t)},selecionarElemento=(e,t,o,l)=>{if(e.classList.contains(t)){let r;if(l&&e.classList.contains(o)&&(r=!0),document.querySelector(`.${t}.${o}`)&&document.querySelector(`.${t}.${o}`).classList.remove(o),r)return;e.classList.add(o)}},construirSelects=({name:e,value:t,id:o,label:l,options:r,outros:n})=>`\n    ${l?`<label for='${o}'><p>${l}</p></label>`:""}\n    <select id="${o}" name='${e}' value='${t}'>\n      <option value='' ${t?"":"selected"} disabled>Escolha:</option>\n      ${r.map(e=>`<option value='${e.value}' ${t===`${e.value}`?"selected":""}>${e.label}</option>`)}\n      ${n?`<option value='outros' ${"outros"===t?"selected":""}>Outros</option>`:""}\n    </select>\n  `,testarCPF=e=>{return validarCPF(CPFDigitos(e))},CPFDigitos=e=>e=(e=e.replace(/\./g,"")).replace(/\-/g,"").trim(),validarCPF=e=>{var t,o,l,r,n=1;if(e.length<11||e.length>14)return!1;for(r=0;r<e.length-1;r++)if(e.charAt(r)!=e.charAt(r+1)){n=0;break}if(n)return!1;for(t=e.substring(0,9),o=e.substring(9),l=0,r=10;r>1;r--)l+=t.charAt(10-r)*r;if((l%11<2?0:11-l%11)!=o.charAt(0))return!1;for(t=e.substring(0,10),l=0,r=11;r>1;r--)l+=t.charAt(11-r)*r;return(l%11<2?0:11-l%11)==o.charAt(1)},autoComplete=({inputSelector:e,divItems:t,itemClass:o,itemsArray:l,clicouItem:r,selecionouItemEnter:n,inputPerdeuFoco:a})=>{document.querySelector(t).addEventListener("mousedown",t=>{document.querySelector(e).value=r(t.target.innerHTML,t)}),document.querySelector(e).addEventListener("blur",r=>{setTimeout(()=>{a({blurEvent:r,inputSelector:e,divItems:t,itemClass:o,itemsArray:l}),document.querySelector(`${t}`)&&(document.querySelector(`${t}`).innerHTML="")},200)});let s=r=>{let a,s=document.querySelectorAll(`.${o}`);if(r.preventDefault(),document.querySelector(`.${o}`)&&13===r.keyCode)document.querySelector(".autocomplete-selected-item")&&(a=document.querySelector(".autocomplete-selected-item")),n({selectedItem:a,inputSelector:e,divItems:t,itemClass:o,itemsArray:l,items:s,keyEvent:r}),document.querySelector(`${t}`).innerHTML="";else if(40===r.keyCode){let e;!(a=document.querySelector(".autocomplete-selected-item"))&&document.querySelector(`.${o}`)&&s[0].classList.add("autocomplete-selected-item"),e=Array.from(s).indexOf(a),document.querySelector(".autocomplete-selected-item").classList.remove("autocomplete-selected-item"),e+1===s.length?(document.querySelectorAll(`.${o}`)[0].classList.add("autocomplete-selected-item"),a=document.querySelectorAll(`.${o}`)[0]):(document.querySelectorAll(`.${o}`)[e+1].classList.add("autocomplete-selected-item"),a=document.querySelectorAll(`.${o}`)[e+1]),$(t).animate({scrollTop:$(a).offset().top-$(`${t} p`).offset().top-50},"fast",(function(){}))}else if(38===r.keyCode){let e;!(a=document.querySelector(".autocomplete-selected-item"))&&document.querySelector(`.${o}`)&&(s[0].classList.add("autocomplete-selected-item"),e=0),e=Array.from(s).indexOf(a),document.querySelector(".autocomplete-selected-item").classList.remove("autocomplete-selected-item"),e<=0?(document.querySelectorAll(`.${o}`)[document.querySelectorAll(`.${o}`).length-1].classList.add("autocomplete-selected-item"),a=document.querySelectorAll(`.${o}`)[document.querySelectorAll(`.${o}`).length-1]):(document.querySelectorAll(`.${o}`)[e-1].classList.add("autocomplete-selected-item"),a=document.querySelectorAll(`.${o}`)[e-1]),$(t).animate({scrollTop:$(a).offset().top-$(`${t} p`).offset().top-100},"fast",(function(){}))}};document.querySelector(e).addEventListener("input",r=>{document.querySelector(e).value.length>=2?(()=>{document.querySelector(t).innerHTML="";for(let r=0;r<l.length;r++)if(l[r].toUpperCase().includes(document.querySelector(e).value.toUpperCase())){let e;"object"==typeof o||(e=o),document.querySelector(t).insertAdjacentHTML("beforeend",`<p class='${e}'>${l[r]}</p><br>`)}})():document.querySelector(t).innerHTML=""}),document.querySelector(e).removeEventListener("keyup",s,!1),document.querySelector(e).addEventListener("keyup",s)};